<!doctype html>

<html>

<head>
<title>Sound</title>


<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js" integrity="sha512-w1Bktzax55ZbjW5Mqjz8+mKz4KqRjEUU35Dpq/ath29yskKqIGwNIHiFNp03m/OiJWDXvdQ1/g6aV+l4PeVO7Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.js" integrity="sha512-U2sgwrFhl+Tgx9iGH9h5Ba2WyIjyCes+D0prtIFw3a0V+/fkaeL5Cd/VjyPHno9kUPE1rnNhBGTyvtZsfJp0xg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<script>

let mySound;
let counter;
let myFilter;

    
function preload()
{
mySound = loadSound("walking.mp3");
}

    
function setup()
{
createCanvas(400,400);
counter = 0;
myFilter = new p5.BandPass();

mySound.disconnect();
mySound.connect(myFilter);
myFilter.freq(1000);
    mySound.loop();
}

    
function draw()
{
background(220);
line
counter+=0.01;
let mySin = sin(counter); 
let y = map(mySin,-1,1, height, 0);
line(0,y, width, y);
let myFreq = map(mySin, -1, 1, 1000, 2000);
    myFilter.freq(myFreq);
}

function mousePressed()
{
mySound.play();
mySound.onended(changeRate);
}
    
function changeRate()
    {
    let myRate = mySound.rate(random(0.8,1.2));
    print(myRate);
        mySound.play();

    }






</script>
</body>

</html>